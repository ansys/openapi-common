[build-system]
requires = [
  "setuptools >= 40.9.0",
  "wheel",
]
build-backend = "setuptools.build_meta"

[tool.tox]
legacy_tox_ini = """
[tox]
envlist = py37,py38,py39,coverage
isolated_build = True

[gh-actions]
python =
    3.7: py37
    3.8: py38
    3.9: py39
    3.10: coverage

[testenv]
deps =
    .[oidc]
    .[linux-kerberos]
    pytest
    requests-mock
    pytest-mock
    covertable
    pytest-cov
    uvicorn
    fastapi
    pydantic
    asgi_gssapi; sys_platform == "linux"
commands = pytest ./tests {posargs}

[testenv:coverage]
commands = pytest --cov=ansys.openapi.common --cov-report=xml ./tests {posargs}

[testenv:lint]
deps =
    black
    mypy
    types-requests
    types-python-dateutil
    {[testenv]deps}

commands =
    black --check ./tests ./src ./requires
    mypy ./src
"""
